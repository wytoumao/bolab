<!DOCTYPE html>
<html lang="{{ .Lang }}">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ if not .IsHome }}{{ .Title }} | {{ end }}{{ .Site.Title }}</title>
    <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.description }}{{ end }}">
    {{ $css := resources.Get "css/main.css" | minify | fingerprint }}
    <link rel="stylesheet" href="{{ $css.RelPermalink }}">
    {{ with .OutputFormats.Get "rss" }}
    <link rel="alternate" type="application/rss+xml" href="{{ .Permalink }}" title="{{ $.Site.Title }}">
    {{ end }}
</head>
<body>
    <div class="layout">
        {{ partial "header.html" . }}
        <main>
            {{ block "main" . }}{{ end }}
        </main>
    </div>
    {{ partial "footer.html" . }}
    <script>
        // Dark mode
        const toggle = document.getElementById('dark-toggle');
        const body = document.body;
        if (localStorage.getItem('darkMode') === 'true') body.classList.add('dark');
        toggle && toggle.addEventListener('click', () => {
            body.classList.toggle('dark');
            localStorage.setItem('darkMode', body.classList.contains('dark'));
        });
        // Mobile menu
        const menuBtn = document.getElementById('menu-toggle');
        const sidebar = document.querySelector('.sidebar');
        menuBtn && menuBtn.addEventListener('click', () => {
            sidebar.classList.toggle('open');
        });
    </script>
</body>
</html>
